<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <title>PD细胞培养工艺开发参考工具箱</title>

  <!-- 修复空格后的 CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">

  <style>
    html,body{height:100%;overflow-x:hidden;font-family:'Noto Sans SC',sans-serif;background:#fdfbf7;scroll-behavior:smooth}
    .content-card{background:#fff;border:1px solid #f0eade;border-radius:.75rem;transition:.3s}
    .content-card:hover{transform:translateY(-4px);box-shadow:0 8px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04)}
    .nav-link{transition:.2s;border-left:3px solid transparent}
    .nav-link.active{color:#c8a2c8;border-left-color:#c8a2c8;background:#f5f1f5;font-weight:500}
    .nav-link:hover{color:#c8a2c8;background:#f8f6f8;border-left-color:#c8a2c8}
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.5)}
    .modal-content{background:#fdfbf7;border-radius:1rem;max-height:80vh;overflow-y:auto}
    .strategy-card{border-left:4px solid}
  </style>
</head>

<body class="text-slate-800">
  <div class="flex">
    <!-- 侧边栏 -->
    <aside class="fixed top-0 left-0 h-screen w-64 bg-white shadow-lg p-4 overflow-y-auto hidden md:block">
      <h1 class="text-xl font-bold mb-6 border-b pb-4">PD细胞培养工具箱</h1>
      <nav id="sidebar-nav" class="flex flex-col space-y-2">
        <a href="#introduction"  class="nav-link px-4 py-2 rounded-r-md">引言</a>
        <a href="#energy"        class="nav-link px-4 py-2 rounded-r-md">能量与碳源</a>
        <a href="#amino-acids"   class="nav-link px-4 py-2 rounded-r-md">氨基酸</a>
        <a href="#vitamins"      class="nav-link px-4 py-2 rounded-r-md">维生素</a>
        <a href="#minerals"      class="nav-link px-4 py-2 rounded-r-md">无机盐与微量元素</a>
        <a href="#supplements"   class="nav-link px-4 py-2 rounded-r-md">补充组分</a>
        <a href="#influencers"   class="nav-link px-4 py-2 rounded-r-md">关键影响因素</a>
        <a href="#strategies"    class="nav-link px-4 py-2 rounded-r-md">质量属性调控策略</a>
        <a href="#conclusion"    class="nav-link px-4 py-2 rounded-r-md">结论与展望</a>
      </nav>
    </aside>

    <!-- 主内容 -->
    <main class="w-full md:ml-64 p-4 md:p-8 space-y-16">
      <div class="md:hidden mb-6">
        <h1 class="text-2xl font-bold text-center">PD细胞培养工具箱</h1>
      </div>

      <!-- 引言 -->
      <section id="introduction">
        <h2 class="text-3xl font-bold mb-4">欢迎来到PD细胞培养工艺开发参考工具箱</h2>
        <p class="text-lg text-slate-600 mb-6">
          本工具箱将复杂的CHO细胞培养工艺开发转化为一个直观、易探索的交互式页面。CHO细胞是生物制药领域生产抗体和重组蛋白的核心工具，而培养基的精确配方是决定细胞生长、蛋白产量和最终产品质量的基石。请通过左侧导航或滚动页面深入了解。
        </p>
      </section>

      <!-- 能量与碳源 -->
      <section id="energy">
        <h2 class="text-3xl font-bold mb-2">能量与碳源</h2>
        <p class="text-slate-600 mb-8">此部分探讨为细胞提供动力的核心代谢物。它们是细胞生长和蛋白质合成的燃料，但其代谢过程也会产生需要严格控制的副产物。</p>
        <div class="grid md:grid-cols-2 gap-8">
          <div class="content-card p-6">
            <h3 class="text-2xl font-semibold mb-4">葡萄糖 (Glucose)</h3>
            <p class="mb-4">最主要的碳源和能量来源。其代谢效率直接影响细胞生长和蛋白生产。</p>
            <div class="border-t pt-4">
              <h4 class="font-semibold mb-2">关键问题：乳酸积累 (瓦博格效应)</h4>
              <p class="text-sm text-slate-600">即使在氧气充足时，CHO细胞也倾向于快速糖酵解产生乳酸，导致培养基酸化和渗透压升高，抑制细胞生长。</p>
            </div>
          </div>
          <div class="content-card p-6">
            <h3 class="text-2xl font-semibold mb-4">谷氨酰胺 (Glutamine)</h3>
            <p class="mb-4">主要的氮源和次级能量来源，但其分解是培养过程中有毒物质氨的主要来源。</p>
            <div class="border-t pt-4">
              <h4 class="font-semibold mb-2">关键问题：氨毒性</h4>
              <p class="text-sm text-slate-600">谷氨酰胺分解代谢产生氨，高浓度氨会抑制细胞生长、诱导凋亡，并损害蛋白质糖基化质量。</p>
            </div>
          </div>
        </div>
      </section>

      <!-- 氨基酸 -->
      <section id="amino-acids">
        <h2 class="text-3xl font-bold mb-2">氨基酸</h2>
        <p class="text-slate-600 mb-8">氨基酸不仅是合成蛋白质的结构单元，更是细胞代谢网络中的关键调控者。点击卡片查看详情。</p>
        <div id="amino-acid-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"></div>
      </section>

      <!-- 维生素 -->
      <section id="vitamins">
        <h2 class="text-3xl font-bold mb-2">维生素</h2>
        <p class="text-slate-600 mb-8">维生素是细胞无法合成的必需有机微量营养素，作为辅酶的前体，驱动能量代谢和生物合成途径。</p>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="vitamins-grid"></div>
      </section>

      <!-- 无机盐与微量元素 -->
      <section id="minerals">
        <h2 class="text-3xl font-bold mb-2">无机盐与微量元素</h2>
        <p class="text-slate-600 mb-8">无机盐维持渗透压和pH，微量元素是酶催化中心不可或缺的部分。</p>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="minerals-grid"></div>
      </section>

      <!-- 补充组分 -->
      <section id="supplements">
        <h2 class="text-3xl font-bold mb-2">补充组分</h2>
        <p class="text-slate-600 mb-8">在化学成分确定的培养基中，需要额外添加特殊功能组分以替代血清功能或保护细胞。</p>
        <div class="grid md:grid-cols-2 gap-8" id="supplements-grid"></div>
      </section>

      <!-- 关键影响因素 -->
      <section id="influencers">
        <h2 class="text-3xl font-bold mb-2">关键生长与表达影响因素</h2>
        <p class="text-slate-600 mb-8">以下物质对细胞生长、蛋白表达和最终产品质量尤为关键。</p>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6" id="influencers-grid"></div>
      </section>

      <!-- 质量属性调控策略 -->
      <section id="strategies">
        <h2 class="text-3xl font-bold mb-2">质量属性(CQA)调控策略</h2>
        <p class="text-slate-600 mb-8">基于组分作用机理，采用上游工艺策略主动调控关键质量属性。</p>

        <!-- 聚集体 -->
        <h3 class="text-xl font-semibold text-blue-800 mb-4">降低聚集体 (Aggregates)</h3>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
          <div class="content-card p-4 border-l-blue-500"><h4 class="font-semibold mb-1">温度</h4><p class="text-sm">生产期降温至31°C，稳定蛋白构象。</p></div>
          <div class="content-card p-4 border-l-blue-500"><h4 class="font-semibold mb-1">渗透压</h4><p class="text-sm">维持>420 mOsm/kg，稳定水合层。</p></div>
          <div class="content-card p-4 border-l-blue-500"><h4 class="font-semibold mb-1">精氨酸</h4><p class="text-sm">补充精氨酸作化学伴侣增溶。</p></div>
        </div>

        <!-- 片段 -->
        <h3 class="text-xl font-semibold text-red-800 mb-4">降低片段 (Fragments)</h3>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
          <div class="content-card p-4 border-l-red-500"><h4 class="font-semibold mb-1">细胞活率</h4><p class="text-sm">优化补料维持高活率，减少HCP释放。</p></div>
          <div class="content-card p-4 border-l-red-500"><h4 class="font-semibold mb-1">pH</h4><p class="text-sm">维持6.8-7.2，抑制酸性蛋白酶。</p></div>
          <div class="content-card p-4 border-l-red-500"><h4 class="font-semibold mb-1">收获时机</h4><p class="text-sm">平衡产量与降解的最佳培养时长。</p></div>
        </div>

        <!-- 酸性变体 -->
        <h3 class="text-xl font-semibold text-orange-800 mb-4">降低酸性变体 (Acidic Variants)</h3>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
          <div class="content-card p-4 border-l-orange-500"><h4 class="font-semibold mb-1">pH</h4><p class="text-sm">维持6.8-7.0，减缓脱酰胺反应。</p></div>
          <div class="content-card p-4 border-l-orange-500"><h4 class="font-semibold mb-1">温度</h4><p class="text-sm">低温降低化学反应速率。</p></div>
          <div class="content-card p-4 border-l-orange-500"><h4 class="font-semibold mb-1">Zn²⁺</h4><p class="text-sm">补锌调节代谢，减少酸性修饰。</p></div>
        </div>

        <!-- 碱性变体 -->
        <h3 class="text-xl font-semibold text-purple-800 mb-4">降低碱性变体 (Basic Variants)</h3>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
          <div class="content-card p-4 border-l-purple-500"><h4 class="font-semibold mb-1">精/赖氨酸</h4><p class="text-sm">降低补料浓度，减轻产物抑制。</p></div>
          <div class="content-card p-4 border-l-purple-500"><h4 class="font-semibold mb-1">Zn²⁺</h4><p class="text-sm">补锌激活羧肽酶促剪切。</p></div>
        </div>

        <!-- 高甘露糖 -->
        <h3 class="text-xl font-semibold text-green-800 mb-4">降低高甘露糖 (Man5)</h3>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
          <div class="content-card p-4 border-l-green-500"><h4 class="font-semibold mb-1">pH</h4><p class="text-sm">维持7.2左右优化糖基化酶活性。</p></div>
          <div class="content-card p-4 border-l-green-500"><h4 class="font-semibold mb-1">糖前体</h4><p class="text-sm">补充半乳糖、尿苷、GlcNAc作底物。</p></div>
          <div class="content-card p-4 border-l-green-500"><h4 class="font-semibold mb-1">Mn²⁺</h4><p class="text-sm">补锰作糖基转移酶辅因子。</p></div>
        </div>

        <!-- 策略拮抗提示 -->
        <div class="content-card p-6 bg-yellow-50 border-l-yellow-400">
          <h3 class="font-semibold text-yellow-900 mb-2">重要考量：策略的相互拮抗</h3>
          <ul class="list-disc list-inside text-sm text-yellow-800 space-y-1">
            <li>高浓度精氨酸抑制聚集，但会抑制羧肽酶→碱性峰↑</li>
            <li>低温减聚集/片段/酸性峰，但可能糖基化不完整</li>
          </ul>
        </div>
      </section>

      <!-- 结论 -->
      <section id="conclusion">
        <h2 class="text-3xl font-bold mb-2">结论与未来展望</h2>
        <p class="text-slate-600 mb-6">
          CHO培养基是一个多组分协同的复杂体系。未来将利用系统生物学与在线监测实现模型驱动的动态精准控制。
        </p>
        <div class="grid md:grid-cols-2 gap-6">
          <div class="content-card p-4 bg-purple-50"><h3 class="font-semibold text-purple-800">系统生物学与模型驱动设计</h3><p class="text-sm text-purple-700">利用组学+数学模型实现理性设计。</p></div>
          <div class="content-card p-4 bg-green-50"><h3 class="font-semibold text-green-800">动态实时控制</h3><p class="text-sm text-green-700">在线监测+拉曼光谱动态调整补料。</p></div>
        </div>
      </section>
    </main>
  </div>

  <!-- 弹窗 -->
  <div id="modal" class="fixed inset-0 z-50 hidden items-center justify-center">
    <div class="modal-backdrop fixed inset-0 bg-black/50"></div>
    <div class="modal-content relative w-11/12 md:max-w-2xl max-h-[80vh] rounded-2xl shadow-2xl p-6 overflow-y-auto bg-white">
      <button id="close-modal" class="absolute top-3 right-3 text-slate-500 hover:text-slate-800">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
      </button>
      <div id="modal-body"></div>
    </div>
  </div>

  <!-- 脚本 -->
  <script>
    /* ===== 数据 ===== */
    const dataStore = {
      aminoAcids: {
        Ala: { name: '丙氨酸', classification: '非极性, NEAA', role: '与丙酮酸互换，参与氮代谢', impact: '常作为代谢副产物被分泌' },
        Arg: { name: '精氨酸', classification: '碱性, 条件EAA', role: '尿素循环；NO合成前体；多胺与脯氨酸前体', impact: '与IgG产量相关；NO信号调控' },
        Asn: { name: '天冬酰胺', classification: '极性, NEAA', role: 'N-连接糖基化位点；氮源', impact: '关键质量属性（CQA）；耗尽可致生长停滞' },
        Asp: { name: '天冬氨酸', classification: '酸性, NEAA', role: 'TCA循环补给；苹果酸-天冬氨酸穿梭', impact: '连接糖酵解与线粒体呼吸' },
        Cys: { name: '半胱氨酸', classification: '极性, NEAA', role: '谷胱甘肽（GSH）合成的限速前体；形成二硫键', impact: '抗氧化防御核心；蛋白质折叠与稳定' },
        Glu: { name: '谷氨酸', classification: '酸性, NEAA', role: '氨基酸代谢中心；TCA循环补给（α-KG）；GABA前体', impact: '氮代谢枢纽；替代Gln可减少氨产生' },
        Gln: { name: '谷氨酰胺', classification: '极性, NEAA', role: '主要氮源；主要能量来源（谷氨酰胺分解）', impact: '主要的氨来源，高浓度有毒性' },
        Gly: { name: '甘氨酸', classification: '非极性, NEAA', role: '与丝氨酸互换；一碳单位来源（GCS）；GSH组分', impact: '参与核酸合成与抗氧化' },
        His: { name: '组氨酸', classification: '碱性, EAA', role: '生理pH缓冲剂；组胺前体', impact: '维持培养基pH稳定；常用于制剂缓冲液' },
        Ile: { name: '异亮氨酸', classification: '非极性, EAA', role: 'BCAA；能量来源；mTOR信号', impact: '重要的能量来源；与细胞生长和生产力相关' },
        Leu: { name: '亮氨酸', classification: '非极性, EAA', role: 'BCAA；mTOR信号通路强激活剂', impact: '强力促进蛋白合成；与IgG产量高度相关' },
        Lys: { name: '赖氨酸', classification: '碱性, EAA', role: '抗体C端赖氨酸异质性来源', impact: 'CQA；被CpD酶切除导致产品不均一' },
        Met: { name: '甲硫氨酸', classification: '非极性, EAA', role: 'SAM循环前体；半胱氨酸合成前体', impact: '表观遗传调控；抗氧化；连接一碳代谢' },
        Phe: { name: '苯丙氨酸', classification: '非极性, EAA', role: '酪氨酸合成前体', impact: '芳香族氨基酸代谢起点' },
        Pro: { name: '脯氨酸', classification: '非极性, NEAA', role: '化学伴侣；胶原蛋白主要成分', impact: '抗细胞应激；防止蛋白质聚集' },
        Ser: { name: '丝氨酸', classification: '极性, NEAA', role: '一碳单位主要来源；O-连接糖基化位点', impact: '核酸合成核心；与甘氨酸、半胱氨酸代谢紧密相连' },
        Thr: { name: '苏氨酸', classification: '极性, EAA', role: 'O-连接糖基化位点', impact: 'CQA；影响蛋白质功能与稳定性' },
        Trp: { name: '色氨酸', classification: '非极性, EAA', role: 'NAD+从头合成前体；血清素前体', impact: '影响细胞氧化还原状态' },
        Tyr: { name: '酪氨酸', classification: '极性, NEAA', role: '信号转导；儿茶酚胺前体', impact: '由苯丙氨酸合成；参与细胞信号调控' },
        Val: { name: '缬氨酸', classification: '非极性, EAA', role: 'BCAA；能量来源；mTOR信号', impact: '重要的能量来源；与细胞生长和生产力相关' }
      },
      vitamins: [
        { name: '硫胺素 (B1)', form: 'TPP', role: '碳水化合物代谢中的脱羧反应' },
        { name: '核黄素 (B2)', form: 'FMN, FAD', role: '氧化还原反应的电子载体' },
        { name: '烟酸 (B3)', form: 'NAD+, NADP+', role: '主要的氧化还原电子载体' },
        { name: '泛酸 (B5)', form: '辅酶A (CoA)', role: '乙酰基和其他酰基的载体' },
        { name: '吡哆醇 (B6)', form: 'PLP', role: '氨基酸代谢；一碳代谢' },
        { name: '生物素 (B7)', form: '生物素', role: '羧化反应' },
        { name: '叶酸 (B9)', form: 'THF', role: '一碳单位的载体' },
        { name: '钴胺素 (B12)', form: '甲钴胺', role: '甲硫氨酸再生' },
        { name: '维生素C', form: '抗坏血酸', role: '抗氧化剂；胶原蛋白合成辅因子' }
      ],
      minerals: [
        { name: '铁 (Fe)', role: '电子传递链, 氧气运输, DNA合成', impact: '缺乏抑制生长；过量产生氧化应激' },
        { name: '锌 (Zn)', role: '基因转录调控, 代谢, DNA/RNA合成', impact: '影响基因表达与增殖' },
        { name: '铜 (Cu)', role: '线粒体呼吸, 抗氧化', impact: '缺乏导致乳酸积累' },
        { name: '硒 (Se)', role: '抗氧化防御, 构成硒蛋白', impact: '缺乏削弱抗氧化能力' },
        { name: '锰 (Mn)', role: '蛋白质糖基化, 抗氧化', impact: '缺乏直接影响糖型' },
        { name: '无机盐 (Na, K, Ca, Mg, P)', role: '维持渗透压、膜电位和pH平衡', impact: '维持细胞基础生理功能' }
      ],
      supplements: [
        { title: '生长因子 (如胰岛素)', content: '在无血清培养基中最重要的促生长和促存活因子，通过激活PI3K/Akt和Ras/MAPK信号通路发挥作用。', mechanism: '<p class="text-xs font-mono bg-amber-50 p-1 rounded">胰岛素 ➔ PI3K/Akt ➔ 抑制凋亡</p><p class="text-xs font-mono bg-amber-50 p-1 rounded mt-1">胰岛素 ➔ Ras/MAPK ➔ 促进增殖</p>' },
        { title: '剪切保护剂 (Pluronic® F-68)', content: '一种非离子表面活性剂，在悬浮培养中保护细胞免受搅拌和通气产生的流体剪切力损伤。', mechanism: '<p class="text-xs">通过嵌入细胞膜增强韧性，减少与气泡的有害接触。</p>' }
      ],
      influencers: [
        { title: '能量与代谢废物', points: ['<strong class="text-green-700">葡萄糖:</strong> 能量核心，但过量导致<strong class="text-red-600">乳酸</strong>积累。', '<strong class="text-purple-700">谷氨酰胺:</strong> 氮源和能源，但分解产生有毒<strong class="text-red-600">氨</strong>。'], summary: '核心矛盾：满足能量需求同时控制有毒副产物。' },
        { title: '蛋白质合成引擎', points: ['<strong class="text-blue-700">亮氨酸:</strong> 关键mTOR激活剂，直接驱动蛋白合成。', '<strong class="text-blue-700">氨基酸平衡:</strong> 减轻细胞负担，提高目标蛋白产量。'], summary: '核心目标：提供充足、平衡的“砖块”和“启动信号”。' },
        { title: '产品质量调控', points: ['<strong class="text-teal-700">天冬酰胺:</strong> N-糖基化位点，耗尽即严重质量问题。', '<strong class="text-teal-700">锰 (Mn):</strong> 糖基转移酶辅因子，决定糖链完整性。', '<strong class="text-teal-700">赖氨酸:</strong> C端异质性是经典质量挑战。'], summary: '核心挑战：精确调控翻译后修饰，满足质量标准。' }
      ],
      conclusions: [
        { title: '系统生物学与模型驱动设计', content: '利用组学技术和数学模型，实现培养基理性设计。', color: 'purple' },
        { title: '动态实时控制', content: '在线监测+拉曼光谱，根据细胞状态动态调整补料。', color: 'green' }
      ]
    };

    /* ===== 渲染函数 ===== */
    const modal = document.getElementById('modal');
    const modalBody = document.getElementById('modal-body');
    const closeModalBtn = document.getElementById('close-modal');
    const modalBackdrop = document.querySelector('.modal-backdrop');

    function populateGrid(id, data, fn) {
      const container = document.getElementById(id);
      data.forEach(item => container.appendChild(fn(item)));
    }

    function populateSection(sectionId, data, fn) {
      const container = document.querySelector(`#${sectionId} > .grid`);
      if (!container) return;
      data.forEach(item => container.appendChild(fn(item)));
    }

    /* 氨基酸卡片 */
    const aaGrid = document.getElementById('amino-acid-grid');
    Object.entries(dataStore.aminoAcids).forEach(([key, val]) => {
      const card = document.createElement('div');
      card.className = 'content-card p-3 text-center cursor-pointer';
      card.innerHTML = `
        <div class="font-bold text-lg">${val.name}</div>
        <div class="text-sm text-slate-500">${key}</div>
        <span class="text-xs px-1.5 py-0.5 rounded-full mt-1 inline-block ${val.classification.includes('EAA') ? 'bg-blue-100 text-blue-800' : 'bg-slate-100 text-slate-700'}">${val.classification.split(',')[0]}</span>
      `;
      card.addEventListener('click', () => {
        modalBody.innerHTML = `
          <h2 class="text-2xl font-bold mb-2">${val.name} (${key})</h2>
          <p class="text-sm text-slate-500 mb-4">${val.classification}</p>
          <div><strong>关键代谢角色：</strong>${val.role}</div>
          <div class="mt-2"><strong>对工艺/质量的影响：</strong>${val.impact}</div>
        `;
        modal.classList.remove('hidden');
      });
      aaGrid.appendChild(card);
    });

    populateSection('vitamins', dataStore.vitamins, v => {
      const card = document.createElement('div');
      card.className = 'content-card p-4';
      card.innerHTML = `<h3 class="font-semibold">${v.name}</h3><p class="text-sm text-slate-600">活性形式：${v.form}</p><p class="text-sm mt-1">${v.role}</p>`;
      return card;
    });

    populateSection('minerals', dataStore.minerals, m => {
      const card = document.createElement('div');
      card.className = 'content-card p-4';
      card.innerHTML = `<h3 class="font-semibold">${m.name}</h3><p class="text-sm mt-1"><strong>功能：</strong>${m.role}</p><p class="text-sm mt-1"><strong>影响：</strong>${m.impact}</p>`;
      return card;
    });

    populateSection('supplements', dataStore.supplements, s => {
      const card = document.createElement('div');
      card.className = 'content-card p-4';
      card.innerHTML = `<h3 class="font-semibold mb-2">${s.title}</h3><p class="text-sm mb-2">${s.content}</p><div class="border-t pt-2">${s.mechanism}</div>`;
      return card;
    });

    populateSection('influencers', dataStore.influencers, i => {
      const card = document.createElement('div');
      card.className = 'content-card p-4';
      card.innerHTML = `
        <h3 class="font-semibold mb-2">${i.title}</h3>
        <ul class="list-disc list-inside text-sm mb-2">${i.points.map(p => `<li>${p}</li>`).join('')}</ul>
        <p class="text-xs bg-amber-50 p-2 rounded">${i.summary}</p>
      `;
      return card;
    });

    populateSection('conclusion', dataStore.conclusions, c => {
      const card = document.createElement('div');
      card.className = `content-card p-4 bg-${c.color}-50 border-${c.color}-200`;
      card.innerHTML = `<h3 class="font-semibold text-${c.color}-800">${c.title}</h3><p class="text-sm text-${c.color}-700">${c.content}</p>`;
      return card;
    });

    /* 弹窗关闭 */
    function closeModal() {
      modal.classList.add('hidden');
    }
    closeModalBtn.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', closeModal);

    /* 滚动高亮导航 */
    const sections = document.querySelectorAll('section');
    const navLinks = document.querySelectorAll('.nav-link');
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          navLinks.forEach(link => {
            link.classList.toggle('active', link.getAttribute('href').substring(1) === entry.target.id);
          });
        }
      });
    }, { rootMargin: '-30% 0px -70% 0px' });
    sections.forEach(sec => observer.observe(sec));

    navLinks.forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        document.querySelector(link.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
      });
    });
  </script>
</body>
</html>
